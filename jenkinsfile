pipeline {

  environment {
    PROJECT = "demo"
  }

agent any
  }
  stages {
    stage('Deploy demo') {
      
      }
      steps {
        container('kubectl') {
          // Create namespace if it doesn't exist
          sh("kubectl get ns ${env.BRANCH_NAME} || kubectl create ns ${env.BRANCH_NAME}")
          sh("kubectl apply -n ${env.BRANCH_NAME} -f k8s/demo")
          echo 'Done!'
        }
      }
    }
  }
}
